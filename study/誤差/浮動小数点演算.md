# 浮動小数点演算における誤差によるWA回避Tips

## なるべく整数で計算し、最後に割る
例： $\frac{h - H_i}{0 - X_i} = \frac{H_i - H_{i+1}}{X_i - X_{i+1}}$ を満たす $h$ を求めたい
- WA
  $$h = \frac{-(H_i - H_{i+1})X_i}{X_i - X_{i+1}} + H_i$$
- AC
  $$h = \frac{H_{i+1}X_i - H_i X_{i+1}}{X_i - X_{i+1}}$$

WAとなるものは1項目がかなり小さくなった時、 $H_i$ が大きいと桁落ちで大きな誤差が生じる。

逆にACのほうでは、分母、分子ともに正確に計算できているので丸め誤差は生じるか桁落ちは発生しない。